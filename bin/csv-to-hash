#!/usr/bin/env ruby
require_relative '../lib/data_parse'
require 'colorize'

def process
  puts 'Data is  successcullfy transformed into Hash'.cyan
end

def hashify_csv(csv_file, destination)
  file = File.new(csv_file, 'r')

  File.open(destination, 'w') do |f|

  f.puts data_parse(file)

  end
  process
rescue Errno::ENOENT => e
  STDERR.puts 'An error occured - check your file exists and its location.'.red
  exit(1)
end

if ARGV.length < 2
  puts 'I need source and destination files to work with please...'.red
  exit(1)
end

document = ARGV[0]
destination = ARGV[1]

hashify_csv(document, destination)
